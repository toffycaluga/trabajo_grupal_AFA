<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    
    <title>trabajo grupal m3c10</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js">
    
  
  </script>
  </head>
  <body>
     <div class="container-fluid p-5 bg-dark  text-white text-center">
		<h1>Evaluacion Modulo 3 </h1>
	</div>
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <div class="container-fluid">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" onclick="getArchivo(interface);">Ingreso de Producto</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" onclick="getMostrar();">Mostrar Lista</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" onclick="getCompra();">Generar Compra</a>
      </li>
     
    </ul>
  </div>
</nav>
    <p id="ejem"></p>

    <script type="text/javascript" >
      let lista=[];
		
		function ingresar(){
			let no=document.getElementById('nom').value;
			let ca=document.getElementById('can').value;
			let vu=document.getElementById('vun').value;
			let ele=new obj(no,ca,vu);
			lista.push(ele);
			limpiar();
		}
		function obj(nombre,cantidad,valorun){
			this.nombre=nombre;
			this.cantidad=cantidad;
			this.valorun=valorun;
			this.total=function(){
				let rea=parseInt(this.cantidad)*parseInt(this.valorun);
				return rea;
			};
		}
		
		function limpiar(){
			document.getElementById('nom').value="";
			document.getElementById('can').value="";
			document.getElementById('vun').value="";
			document.getElementById('nom').focus();
		}
    
        function interface(some){
        document.getElementById('ejem').innerHTML=some;
        }
            function getArchivo(myllamada){
                let req=new XMLHttpRequest();
                req.open('GET', 'ingreso.html');
                req.onload=function(){

                    if (req.status==200) {
                        myllamada(this.responseText);
                    }else{
                        myllamada("error: "+req.status);
                    }
                }
              req.send();
            }
          
    async function getMostrar(){
            let promesa=new Promise(function(resolve){
                let req=new XMLHttpRequest();
                req.open('GET','mostrar_lista.html');
                req.onload=function(){
                    if(req.status==200){
                        resolve(req.response);
                    }else{
                        resolve("error, file not found");
                    }
                };
                req.send();
            });
           
            return document.getElementById('ejem').innerHTML=await promesa;
           
        }
        async function getCompra(){
            let promesa=new Promise(function(resolve){
                let req=new XMLHttpRequest();
                req.open('GET','compra.html');
                req.onload=function(){
                    if(req.status==200){
                        resolve(req.response);
                    }else{
                        resolve("error, file not found");
                    }
                };
                req.send();
            });
            return document.getElementById('ejem').innerHTML=await promesa;
           
        }


      function iva(){
        mostrar();
			obj.prototype.ivva=function(){
				let monto=this.total()*0.19;
				return monto;
			};
			let sumaiva=0;
			let sumatotal=0;
			let neto=0;
			for (var i = 0; i <lista.length; i++) {
				sumaiva+=lista[i].ivva();
				sumatotal+=lista[i].total();
			}
			neto=sumatotal+sumaiva;
      let txt="<table border='1'>"
			txt+="Bruto: $"+sumatotal+"<br>";
			txt+="IVA: $"+sumaiva+"<br>";
			txt+="Total: $"+neto+"<br>";
      txt+="</table>"
			document.getElementById('iva').innerHTML=txt;
		}
    
  function mostrar(){
			let contenido="<table border='1' class='table table-bordered table-striped'>";
			contenido+="<tr><td>nombre</td><td>cantidad</td><td>valor UN</td><td>total</td></tr>";
			for (var i = 0; i <lista.length; i++) {
				contenido+=  "<tr><td>"+lista[i].nombre+
							"</td><td>"+lista[i].cantidad+
							"</td><td>"+lista[i].valorun+
							"</td><td>"+lista[i].total()+
							"</td></tr>";
			}
      contenido+="</table>";
			document.getElementById('muestra').innerHTML=contenido;
      
	
		}

    </script>
  </body>
</html>
<!-- 
  Ejercicio clase 10 – m3c10
Tarea en clase:
Tarea a desarrollar en grupos de a 3 alumnos.
Genere una página web donde se implemente un menú el cual llame mediante Ajax a más de una
pagina web, donde estas web’s se carguen como contenido en un contenedor dentro de la página
principal.


En la primera parte “ingreso de
productos“ genere un ingreso de datos donde sean capturados por una función y esta construya un
objeto y este sea agregado a una colección de datos.


Ejercicio asincrónico 10 – m3c10
Tarea asincrónica:
En la tarea en clases agréguele el llamado a otra web donde se pueda mostrar el listado de
productos agregados al presionar el botón “mostrar lista”.
Además al presionar la opción “generar compra” muestre el total de los elementos a
comprar, el total de todo y el iva agregado. Como total a pagar.

-->
